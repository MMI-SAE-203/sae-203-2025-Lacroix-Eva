---
import Layout from "../../../layouts/Layout.astro";
import CardMovie from "../../../components/CardMovie.astro";
import CardActivities from "../../../components/CardActivities.astro";
import { getProgrammeByDay } from "../../../../backend/backend.mjs";

const { date } = Astro.params;
const programme = await getProgrammeByDay(date);
---

<Layout nom_page={`Programme du ${new Date(date).toLocaleDateString("fr-FR")}`}>
  <h2 class="text-center text-4xl font-bold text-white mt-6">
    Programme du {new Date(date).toLocaleDateString("fr-FR")}
  </h2>

  <!-- ✅ Liste des films et activités du jour -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8 mb-12">
    {
      programme.length > 0 ? (
        programme.map((item) =>
          item.type === "film" ? (
            <CardMovie {...item} />
          ) : (
            <CardActivities {...item} />
          )
        )
      ) : (
        <p class="text-white text-center col-span-2">
          Aucun événement prévu pour cette date.
        </p>
      )
    }
  </div>

  <div class="text-center mt-6">
    <a href="/programme" class="text-cyan-400 hover:underline">
      ⬅ Retour au programme complet
    </a>
  </div>
</Layout>
